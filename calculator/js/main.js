!function(){"use strict";var e,t={875:function(e,t,r){var i;r(1703),r(7658),function(e){e[e.initial=0]="initial",e[e.operator_bracket=1]="operator_bracket",e[e.float=2]="float",e[e.int=3]="int"}(i||(i={}));var n,o,s=function(e,t,r,i){if("a"===r&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)};class a{constructor(e,t){n.set(this,void 0),function(e,t,r,i,n){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===i?n.call(e,r):n?n.value=r:t.set(e,r)}(this,n,e,"f"),this.action=t}getBasic(){return s(this,n,"f").basic}getPriority(){return s(this,n,"f").priority}getQuote(){return s(this,n,"f").quote}}n=new WeakMap,function(e){e.left="(",e.right=")"}(o||(o={}));var c,f,l=function(e,t,r,i,n){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,r):n?n.value=r:t.set(e,r),r},u=function(e,t,r,i){if("a"===r&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)};class h{constructor(e,t){c.set(this,void 0),l(this,c,e,"f"),this.action=t}getBasic(){return u(this,c,"f").basic}getQuote(){return u(this,c,"f").quote}}c=new WeakMap;class p extends h{constructor(){super(...arguments),this.bracketName=o.left}}class d extends h{constructor(){super(...arguments),this.bracketName=o.right}}class w{constructor(e){f.set(this,void 0),l(this,f,e||[],"f")}pushNewIndex(e){u(this,f,"f").push(e)}popPeekIndex(){return u(this,f,"f").pop()}clearAllIndex(){l(this,f,[],"f")}countSize(){return u(this,f,"f").length}countBeforeItemOf(e){const t=u(this,f,"f");let r=0;for(let i=0;i<t.length&&e>=t[i];i++)r++;return r}}f=new WeakMap;var y,g=function(e,t,r,i){if("a"===r&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)};class m{constructor(e){y.set(this,void 0),function(e,t,r,i,n){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===i?n.call(e,r):n?n.value=r:t.set(e,r)}(this,y,e,"f")}getBasic(){return g(this,y,"f").basic}getQuote(){return g(this,y,"f").quote}}function v(e,t){return(e instanceof p||e instanceof d)&&(void 0===t||e.getBasic()===o[t])}function b(e){return e instanceof a}y=new WeakMap;var k,x,T,E,P,R,A,q=function(e,t,r,i,n){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,r):n?n.value=r:t.set(e,r),r},I=function(e,t,r,i){if("a"===r&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)};const C={isDone:!0},M={isDone:!1,msg:"不得输入超过12位（含小数点）"};function j(e,t){const r=document.createElement(e);return t&&Object.keys(t).forEach((e=>{r.setAttribute(e,t[e])})),r}function K(e,t){const r=j(e,t);let i={isMounted(){return Boolean(r.parentElement)},updateText(e){this.isMounted()&&(r.innerText=String(e))}};return Object.assign(r,i)}x=new WeakMap,T=new WeakMap,E=new WeakMap,k=new WeakSet,P=function(e){I(this,T,"f").length=0,I(this,T,"f").push(e),q(this,E,i.operator_bracket,"f")},R=function(e){if(I(this,E,"f")<i.float&&I(this,k,"m",A).call(this),"."===e){if(I(this,E,"f")===i.float)return;return 0===I(this,T,"f").length&&I(this,T,"f").push("0"),I(this,T,"f").push(e),void q(this,E,i.float,"f")}I(this,T,"f").push(e),I(this,E,"f")!==i.float&&q(this,E,i.int,"f")},A=function(){I(this,T,"f").length=0,q(this,E,i.initial,"f")};const S=function(){const e=Object.create(null);return Reflect.defineProperty(e,"store",{value:Object.create(null)}),Reflect.defineProperty(e,"eventMap",{value:new Map}),Reflect.defineProperty(e,"on",{value(t,r){let i=e.eventMap;i.has(t)?i.get(t).add(r):i.set(t,new Set([r]))}}),Reflect.defineProperty(e,"off",{value(t,r){let i=e.eventMap;if(i.has(t)){let e=i.get(t);return e.delete(r),void(0===e.size&&i.delete(t))}console.error("找不到目标事件，无法卸载回调函数！")}}),Reflect.defineProperty(e,"emmit",{value(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];let o=e.eventMap;if(!o.has(t))return console.error("找不到目标事件，无法触发回调函数！");o.get(t).forEach((t=>{t.apply(e,i)}))}}),Reflect.defineProperty(e,"once",{value(t,r){let i=e.eventMap;i.has(t)||i.set(t,new Set),i.get(t).add((function i(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];r.apply(e,o),e.off(t,i)}))}}),e}();Reflect.set(S.store,"TypingRegister",new class{constructor(e){k.add(this),x.set(this,void 0),T.set(this,[]),E.set(this,i.initial),q(this,x,e,"f")}tryPush(e){return v(e)||b(e)?(I(this,k,"m",P).call(this,e),C):I(this,T,"f").length>I(this,x,"f")?M:(I(this,k,"m",R).call(this,e),C)}tryPop(){0!==I(this,T,"f").length&&(1!==I(this,T,"f").length?"."!==I(this,T,"f").pop()||q(this,E,i.int,"f"):this.clear())}unPacket(e){if(this.clear(),v(e)||b(e))this.tryPush(e);else{if("number"!=typeof e||!Number.isFinite(e))throw new Error("unPackage解析错误");{let t=e.toString().split("");t.length=Math.min(t.length,I(this,x,"f"));for(let e=0;e<t.length;e++)this.tryPush(t[e])}}}clear(){I(this,k,"m",A).call(this)}isEmpty(){return 0===I(this,T,"f").length}getPacket(){return I(this,E,"f")===i.operator_bracket?I(this,T,"f")[0]:I(this,E,"f")>=i.float?parseFloat(I(this,T,"f").join(""))||0:(I(this,E,"f"),void i.initial)}getItems(){return I(this,T,"f")}getCurrentType(){return I(this,E,"f")}}(12)),Reflect.set(S.store,"BracketLIndexs",new w),Reflect.set(S.store,"BracketRIndexs",new w),Reflect.set(S.store,"Tips",function(){let e,t,r=0;const i=j("div",{class:"tips",level:String(r)}),n=j("div",{class:"tips1"}),o=j("div",{class:"tips2"});i.appendChild(n),i.appendChild(o);let s={show(s,a){if(this.isMounted()){if(3!==r||0===s){const t=s-r;return r=s,n.style.width="0",n.style.opacity="0",n.innerHTML=String(a),i.setAttribute("level",String(s)),void(0!==s&&(e&&clearTimeout(e),e=setTimeout((()=>{i.setAttribute("level",String(s)),n.style.width="9.5rem",n.style.opacity="0.8"}),300*t)))}o.innerHTML=String(a),o.style.width="9.5rem",t&&clearTimeout(t),t=setTimeout((()=>{o.style.width="0"}),1800)}},hide(){e&&clearTimeout(e),t&&clearTimeout(t),this.show(0,"")},isMounted(){return Boolean(i.parentElement)}};return Object.assign(i,s)}()),Reflect.set(S.store,"Result",K("div",{class:"result"})),Reflect.set(S.store,"Formula",K("div",{class:"formula"})),Reflect.set(S.store,"infixArr",[]),Reflect.set(S.store,"frontInfixArr",[]),Reflect.set(S.store,"frontResult",0),S.on("resetStore",(()=>{S.store.TypingRegister.clear(),S.store.BracketLIndexs.clearAllIndex(),S.store.BracketRIndexs.clearAllIndex(),S.store.infixArr.length=0,S.store.frontInfixArr.length=0,S.emmit("setFrontResult",0)})),S.on("setFrontResult",(e=>{void 0!==e?Reflect.set(S.store,"frontResult",e):console.error("更新frontResult失败，值为空")})),S.on("setInfixArr",(e=>{e?Reflect.set(S.store,"infixArr",e):console.error("更新infixArr失败，值为空")})),S.on("setFrontInfixArr",(e=>{e?Reflect.set(S.store,"frontInfixArr",e):console.error("更新frontInfixArr失败，值为空")}));const B=S.store,{Tips:O,TypingRegister:F,BracketLIndexs:N,BracketRIndexs:L}=S.store,W=new p({basic:o.left,quote:"("});W.action=function(){const e=F.getPacket();void 0!==e?v(e,"right")||"number"==typeof e?O.show(2,"右括号、数字后面不能直接加左括号"):(B.infixArr.push(e),v(e,"left")&&N.pushNewIndex(B.infixArr.length-1),F.tryPush(this)):F.tryPush(this)};const z=new d({basic:o.right,quote:")"});z.action=function(){if(L.countSize()===N.countSize())return void O.show(2,"禁止输入多余右括号");const e=F.getPacket();if(void 0!==e)if(b(e))O.show(2,"运算符后面不能加右括号");else if(v(e,"left"))O.show(2,"括号里面要有运算");else{if(v(e,"right")){if(L.countSize()-N.countSize()==-1)return void O.show(2,"右括号够了，不能再输入");L.pushNewIndex(B.infixArr.length)}B.infixArr.push(e),F.tryPush(this)}else O.show(2,"右括号不能放在开头")};const D=new a({basic:"+",priority:1,quote:"加"},((e,t)=>e+t)),Q=new a({basic:"-",priority:1,quote:"减"},((e,t)=>e-t)),_=new a({basic:"×",priority:2,quote:"乘"},((e,t)=>e*t)),H=new a({basic:"÷",priority:2,quote:"除以"},((e,t)=>0===t?(O.show(3,"不能除以零，除以零部分不会被计算"),0):((e,t)=>e/t)(e,t))),G=new a({basic:"%",priority:2,quote:"取余"},((e,t)=>0===t?(O.show(3,"不能除以零，求余部分的结果不会被计算"),0):((e,t)=>e%t)(e,t)));r(2262),r(4506);var J,U=function(e,t,r,i,n){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,r):n?n.value=r:t.set(e,r),r},V=function(e,t,r,i){if("a"===r&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)};class X{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];J.set(this,void 0),U(this,J,e,"f")}push(e){V(this,J,"f").push(e)}pop(){return V(this,J,"f").pop()}clear(){U(this,J,[],"f")}isEmpty(){return 0===V(this,J,"f").length}getPeek(){return V(this,J,"f").at(-1)}getItems(){return V(this,J,"f").slice(0)}size(){return V(this,J,"f").length}}function Y(e){try{const t=function(e){let t=new X,r=new X;for(e.forEach((e=>{if("number"==typeof e&&Number.isFinite(e))r.push(e);else if(v(e,"right")){for(;!t.isEmpty()&&!v(t.getPeek(),"left");)r.push(t.pop());if(void 0===t.pop())throw new Error("中缀表达式中，找不到对应的左括号")}else if(v(e,"left"))t.push(e);else{if(!b(e))throw new Error("中缀表达式中含有非法元素");for(;!t.isEmpty()&&!v(t.getPeek(),"left")&&t.getPeek().getPriority()>=e.getPriority();)r.push(t.pop());t.push(e)}}));!t.isEmpty();){const e=t.pop();if(v(e))throw new Error("中缀表达式中含有非法左括号");r.push(e)}return r.getItems()}(e),r=function(e){let t=[];for(let r of e)if("number"!=typeof r){if(!(t.length>1&&b(r)))throw new Error("后缀表达式不符合规范，缺少操作数");{let e=t.pop(),i=t.pop();t.push(r.action(i,e))}}else t.push(r);if(1!==t.length)throw new Error("计算后缀表达式出错，缺少运算符");return parseFloat(t[0].toFixed(12))}(t);return r}catch(e){throw e}}J=new WeakMap;const Z=S.store,{TypingRegister:$,BracketLIndexs:ee,BracketRIndexs:te,Tips:re,Result:ie,Formula:ne}=S.store,oe=new m({basic:"清空",quote:"清空"});oe.action=function(){S.emmit("resetStore")};const se=new m({basic:"⇤",quote:"⇤"});se.action=function(){if($.isEmpty()&&0===Z.infixArr.length)0!==Z.frontResult&&S.emmit("setFrontResult",0);else if($.tryPop(),$.isEmpty()&&0!==Z.infixArr.length){let e=Z.infixArr.pop();v(e,"left")&&ee.popPeekIndex(),v(e,"right")&&te.popPeekIndex(),$.unPacket(e)}};const ae=new m({basic:"=",quote:"等于"});function ce(e,t){for(void 0===t||v(t,"left")||(e=e.slice()).push(t);0!==e.length&&(v(e.at(-1),"left")||b(e.at(-1)));)e.pop();let r=ee.countBeforeItemOf(e.length-1)-te.countSize();for(let t=0;t<r;t++)e.push(z);return e}ae.action=function(){const e=$.getCurrentType();if(e===i.initial)return void re.show(2,"没有可计算的元素");const t=$.getPacket();[i.float,i.int].includes(e)?Z.infixArr.push(t):v(t,"right")&&(Z.infixArr.push(t),te.pushNewIndex(Z.infixArr.length-1));let r=ce(Z.infixArr).slice();if(S.emmit("resetStore"),re.hide(),0===r.length)return;let n=Y(r);S.emmit("setFrontResult",n),S.emmit("setFrontInfixArr",r)};const fe=new Map;function le(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.map((e=>["string","number"].includes(typeof e)?e:e.getQuote())).join(t)}fe.set("2",D),fe.set("5",H),fe.set("3",Q),fe.set("4",_),fe.set("6",G),fe.set("0",W),fe.set("1",z),fe.set("9",ae),fe.set("8",se),fe.set("7",oe),fe.set("10","0"),fe.set("11","1"),fe.set("12","2"),fe.set("13","3"),fe.set("14","4"),fe.set("15","5"),fe.set("16","6"),fe.set("17","7"),fe.set("18","8"),fe.set("19","9"),fe.set("20",".");const ue=function(){const e=[{basic:"⇤",quote:"⇤",keyKind:"8"},{basic:"清空",quote:"清空",keyKind:"7"},{basic:"%",quote:"取余",keyKind:"6"},{basic:"÷",quote:"除以",keyKind:"5"},{basic:"7",quote:"柒",keyKind:"17"},{basic:"8",quote:"捌",keyKind:"18"},{basic:"9",quote:"玖",keyKind:"19"},{basic:"×",quote:"乘",keyKind:"4"},{basic:"4",quote:"肆",keyKind:"14"},{basic:"5",quote:"伍",keyKind:"15"},{basic:"6",quote:"陆",keyKind:"16"},{basic:"-",quote:"减",keyKind:"3"},{basic:"1",quote:"壹",keyKind:"11"},{basic:"2",quote:"贰",keyKind:"12"},{basic:"3",quote:"叁",keyKind:"13"},{basic:"+",quote:"加",keyKind:"2"},{basic:o.left,quote:"(",keyKind:"0"},{basic:o.right,quote:o.right,keyKind:"1"},{basic:"0",quote:"零",keyKind:"10"},{basic:".",quote:"点",keyKind:"20"},{basic:"=",quote:"=",keyKind:"9"}],t=j("ul");for(let r=0;r<e.length;r++){let i=j("li",{"data-type":e[r].keyKind});const n=j("span");n.innerText=e[r].quote,i.appendChild(n),t.appendChild(i)}let r={isMounted(){return Boolean(t.parentElement)}};return Object.assign(t,r)}(),{Tips:he,Formula:pe,Result:de}=S.store;function we(e){let t=e.target;if(t){switch(t.nodeName.toLowerCase()){case"li":break;case"span":t=t.parentNode;break;default:return!1}let e=t.dataset.type;if(!e)return;let n=(r=e,fe.get(r));n&&function(e){if("string"==typeof e?function(e){const t=$.getPacket(),r=$.getCurrentType();if([i.initial,i.float,i.int].includes(r));else{if(v(t,"right"))return void re.show(2,"右括号后面不能直接加数字");if(v(t,"left"))Z.infixArr.push(t),ee.pushNewIndex(Z.infixArr.length-1);else{if(!b(t))throw new Error("处理的数字型输入时，寄存器内容读取异常"+t);Z.infixArr.push(t)}}$.tryPush(e)}(e):v(e)||e instanceof m?e.action():b(e)&&function(e){const t=$.getPacket(),r=$.getCurrentType();if(void 0===t)Z.infixArr.push(Z.frontResult),S.emmit("setFrontResult",0);else if([i.float,i.int].includes(r))Z.infixArr.push(t);else if(v(t,"right"))Z.infixArr.push(t),te.pushNewIndex(Z.infixArr.length-1);else if(!b(t)){if(v(t,"left"))return void re.show(2,"请先输入数字");throw console.log(t),new Error("处理的运算符型输入时，寄存器内容读取异常"+t)}$.tryPush(e)}(e),console.log($.getPacket()),"string"!=typeof e&&"="===e.getBasic())return ie.updateText(Z.frontResult),void ne.updateText(le([...Z.frontInfixArr,ae,Z.frontResult]," "));if($.isEmpty())re.hide();else if("string"==typeof e||"⇤"===e.getBasic()){const e=ce(Z.infixArr,$.getPacket()),t=e.length?Y(e):0;re.show(1,t)}ie.updateText(le($.getItems())||0),ne.updateText(le(Z.infixArr," "))}(n)}var r}document.addEventListener("selectstart",(function(e){e.preventDefault()})),window.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".show"),t=document.querySelector(".keyEnter");e&&(e.appendChild(he),e.appendChild(pe),e.appendChild(de)),ue.addEventListener("click",we),null==t||t.appendChild(ue)}))}},r={};function i(e){var n=r[e];if(void 0!==n)return n.exports;var o=r[e]={exports:{}};return t[e].call(o.exports,o,o.exports,i),o.exports}i.m=t,e=[],i.O=function(t,r,n,o){if(!r){var s=1/0;for(l=0;l<e.length;l++){r=e[l][0],n=e[l][1],o=e[l][2];for(var a=!0,c=0;c<r.length;c++)(!1&o||s>=o)&&Object.keys(i.O).every((function(e){return i.O[e](r[c])}))?r.splice(c--,1):(a=!1,o<s&&(s=o));if(a){e.splice(l--,1);var f=n();void 0!==f&&(t=f)}}return t}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[r,n,o]},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={179:0};i.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,o,s=r[0],a=r[1],c=r[2],f=0;if(s.some((function(t){return 0!==e[t]}))){for(n in a)i.o(a,n)&&(i.m[n]=a[n]);if(c)var l=c(i)}for(t&&t(r);f<s.length;f++)o=s[f],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(l)},r=self.webpackChunkcalculator=self.webpackChunkcalculator||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var n=i.O(void 0,[769],(function(){return i(875)}));n=i.O(n)}();